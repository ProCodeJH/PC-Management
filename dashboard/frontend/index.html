<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academy PC Admin — Main Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#2563eb",
                        "primary-dark": "#1e40af",
                        "primary-light": "#dbeafe",
                        "secondary": "#64748b",
                        "bg-base": "#f1f5f9",
                        "surface": "#ffffff",
                        "border-c": "#e2e8f0",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"],
                        "body": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.5rem", "lg": "0.75rem", "xl": "1rem" },
                },
            },
        }
    </script>
    <link rel="stylesheet" href="styles.css">
</head>

<body class="bg-bg-base font-display text-slate-800 antialiased overflow-hidden">
    <div class="flex h-screen w-full overflow-hidden">

        <!-- ===== Sidebar ===== -->
        <aside class="hidden md:flex flex-col w-64 bg-white border-r border-border-c flex-shrink-0 shadow-sm z-10">
            <!-- Logo -->
            <div class="flex items-center gap-3 px-5 py-5 border-b border-slate-100">
                <div class="w-9 h-9 rounded-lg bg-primary flex items-center justify-center">
                    <span class="material-symbols-outlined text-white text-xl"
                        style="font-variation-settings:'FILL' 1">dashboard</span>
                </div>
                <div>
                    <p class="text-sm font-bold text-slate-800 leading-tight">Enterprise</p>
                    <p class="text-xs text-slate-400 leading-tight">PC Manager</p>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 px-3 py-4 space-y-1 overflow-y-auto sidebar-scroll">
                <p class="px-3 pb-2 text-[10px] font-semibold text-slate-400 uppercase tracking-wider">Overview</p>
                <a href="index.html" class="nav-link active">
                    <span class="material-symbols-outlined text-[20px]">space_dashboard</span>
                    <span>대시보드</span>
                </a>
                <a href="classroom.html" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">grid_view</span>
                    <span>교실 모니터링</span>
                </a>
                <a href="student.html" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">person_search</span>
                    <span>학생 활동 로그</span>
                </a>

                <p class="px-3 pt-5 pb-2 text-[10px] font-semibold text-slate-400 uppercase tracking-wider">Management
                </p>
                <a href="communication.html" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">forum</span>
                    <span>커뮤니케이션</span>
                </a>
                <a href="deployment.html" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">deployed_code</span>
                    <span>배포 & 설정</span>
                </a>
                <a href="analytics.html" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">monitoring</span>
                    <span>AI 분석</span>
                </a>

                <p class="px-3 pt-5 pb-2 text-[10px] font-semibold text-slate-400 uppercase tracking-wider">System</p>
                <a href="#" class="nav-link">
                    <span class="material-symbols-outlined text-[20px]">settings</span>
                    <span>설정</span>
                </a>
            </nav>

            <!-- Sidebar Footer -->
            <div class="px-5 py-4 border-t border-slate-100">
                <div class="flex items-center gap-2 text-xs text-slate-400">
                    <span class="w-2 h-2 rounded-full bg-emerald-400 animate-pulse"></span>
                    <span>시스템 정상</span>
                </div>
                <p class="text-[10px] text-slate-300 mt-1">v4.0.0 — Enterprise Edition</p>
            </div>
        </aside>

        <!-- ===== Main Content ===== -->
        <div class="flex-1 flex flex-col h-full overflow-hidden relative bg-slate-50/50">
            <!-- Header -->
            <header
                class="flex items-center justify-between px-6 h-16 bg-white/80 backdrop-blur border-b border-border-c flex-shrink-0">
                <div>
                    <h1 class="text-lg font-bold text-slate-800">대시보드</h1>
                    <p class="text-xs text-slate-400 -mt-0.5">실시간 PC 모니터링 & 관리</p>
                </div>
                <div class="flex items-center gap-3">
                    <!-- Search -->
                    <div class="relative hidden lg:block">
                        <span
                            class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-lg">search</span>
                        <input id="searchInput" type="text" placeholder="PC 검색... (Ctrl+K)"
                            class="w-56 h-9 pl-10 pr-4 text-sm bg-slate-50 border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30 focus:border-primary transition placeholder:text-slate-300">
                    </div>
                    <!-- Refresh -->
                    <button id="refreshBtn" class="header-icon-btn" title="새로고침">
                        <span class="material-symbols-outlined text-lg">refresh</span>
                    </button>
                    <!-- Notifications -->
                    <button id="notifBtn" class="header-icon-btn relative" title="알림">
                        <span class="material-symbols-outlined text-lg">notifications</span>
                        <span id="notifBadge"
                            class="absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-[10px] font-bold rounded-full items-center justify-center hidden">0</span>
                    </button>
                    <!-- Theme Toggle -->
                    <button id="themeToggle" class="header-icon-btn" title="테마 전환">
                        <span class="material-symbols-outlined text-lg">dark_mode</span>
                    </button>
                    <!-- User -->
                    <div class="flex items-center gap-2 pl-3 border-l border-slate-200">
                        <div
                            class="w-8 h-8 rounded-full bg-primary flex items-center justify-center text-white text-xs font-bold">
                            A</div>
                        <span class="text-sm font-medium text-slate-600 hidden xl:block">관리자</span>
                    </div>
                </div>
            </header>

            <!-- Scrollable Content -->
            <main class="flex-1 overflow-y-auto p-6 space-y-6" id="mainContent">

                <!-- ===== Stats Cards ===== -->
                <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="stat-card group">
                        <div class="w-11 h-11 rounded-xl bg-blue-50 flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary text-2xl"
                                style="font-variation-settings:'FILL' 1">computer</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-xs font-medium text-slate-400">전체 PC</p>
                            <p class="text-2xl font-bold text-slate-800" id="totalPCs">0</p>
                        </div>
                    </div>
                    <div class="stat-card group">
                        <div class="w-11 h-11 rounded-xl bg-emerald-50 flex items-center justify-center">
                            <span class="material-symbols-outlined text-emerald-500 text-2xl"
                                style="font-variation-settings:'FILL' 1">check_circle</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-xs font-medium text-slate-400">온라인</p>
                            <p class="text-2xl font-bold text-emerald-600" id="onlinePCs">0</p>
                        </div>
                    </div>
                    <div class="stat-card group">
                        <div class="w-11 h-11 rounded-xl bg-amber-50 flex items-center justify-center">
                            <span class="material-symbols-outlined text-amber-500 text-2xl"
                                style="font-variation-settings:'FILL' 1">schedule</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-xs font-medium text-slate-400">오늘 활동</p>
                            <p class="text-2xl font-bold text-slate-800" id="todayActivities">0</p>
                        </div>
                    </div>
                    <div class="stat-card group">
                        <div class="w-11 h-11 rounded-xl bg-violet-50 flex items-center justify-center">
                            <span class="material-symbols-outlined text-violet-500 text-2xl"
                                style="font-variation-settings:'FILL' 1">verified_user</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-xs font-medium text-slate-400">보안 상태</p>
                            <p class="text-2xl font-bold text-slate-500" id="securityStatus">—</p>
                        </div>
                    </div>
                </section>

                <!-- ===== Bulk Control Toolbar ===== -->
                <section
                    class="flex items-center justify-between bg-white rounded-xl border border-slate-200 px-5 py-3 shadow-sm">
                    <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-primary">bolt</span>
                        <span class="text-sm font-semibold text-slate-700">전체 PC 제어</span>
                        <span class="text-xs text-slate-400" id="bulkCount">0대 온라인</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="dashboard.sendBulkCommand('lock')" class="bulk-action-btn">
                            <span class="material-symbols-outlined text-base">lock</span>
                            <span class="hidden sm:inline">전체 잠금</span>
                        </button>
                        <button onclick="dashboard.openBulkMessageModal()" class="bulk-action-btn">
                            <span class="material-symbols-outlined text-base">chat</span>
                            <span class="hidden sm:inline">전체 메시지</span>
                        </button>
                        <button onclick="dashboard.requestAllScreenshots()" class="bulk-action-btn">
                            <span class="material-symbols-outlined text-base">screenshot_monitor</span>
                            <span class="hidden sm:inline">전체 스크린샷</span>
                        </button>
                        <button onclick="dashboard.sendBulkCommand('shutdown')"
                            class="bulk-action-btn text-red-500 hover:bg-red-50 hover:border-red-200">
                            <span class="material-symbols-outlined text-base">power_settings_new</span>
                            <span class="hidden sm:inline">전체 종료</span>
                        </button>
                    </div>
                </section>

                <!-- ===== Content Grid: PC Grid + Right Sidebar ===== -->
                <section class="grid grid-cols-1 xl:grid-cols-[1fr_360px] gap-5">

                    <!-- PC Grid Card -->
                    <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                        <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-primary text-lg">dns</span>
                                <h2 class="text-sm font-bold text-slate-800">PC 현황</h2>
                            </div>
                            <div class="flex items-center gap-2">
                                <button id="addPcBtn"
                                    class="inline-flex items-center gap-1.5 h-8 px-3 bg-primary text-white text-xs font-semibold rounded-lg hover:bg-primary-dark transition">
                                    <span class="material-symbols-outlined text-base">add</span>
                                    PC 추가
                                </button>
                                <button id="oneClickSetupBtn"
                                    class="inline-flex items-center gap-1.5 h-8 px-3 bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-xs font-semibold rounded-lg hover:brightness-110 transition">
                                    <span class="material-symbols-outlined text-base">bolt</span>
                                    원클릭 설정
                                </button>
                                <button id="viewGridBtn" class="header-icon-btn !w-8 !h-8"><span
                                        class="material-symbols-outlined text-base">grid_view</span></button>
                                <button id="viewListBtn" class="header-icon-btn !w-8 !h-8"><span
                                        class="material-symbols-outlined text-base">view_list</span></button>
                            </div>
                        </div>
                        <div class="p-4 min-h-[300px]" id="pcGrid">
                            <!-- PC Cards rendered by JS -->
                            <div class="flex flex-col items-center justify-center py-16 text-slate-300">
                                <span class="material-symbols-outlined text-5xl mb-3">desktop_windows</span>
                                <p class="text-sm font-medium text-slate-400">연결된 PC가 없습니다</p>
                                <p class="text-xs text-slate-300 mt-1">에이전트를 실행하면 자동으로 연결됩니다</p>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="space-y-5">
                        <!-- Chart Card -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                            <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-amber-500 text-lg">bar_chart</span>
                                    <h2 class="text-sm font-bold text-slate-800">시스템 사용률</h2>
                                </div>
                                <select
                                    class="text-xs border border-slate-200 rounded-lg px-2 py-1 text-slate-500 focus:outline-none">
                                    <option>오늘</option>
                                    <option>이번 주</option>
                                    <option>이번 달</option>
                                </select>
                            </div>
                            <div class="p-4 h-[200px]">
                                <canvas id="usageChart"></canvas>
                            </div>
                        </div>

                        <!-- Activity Log Card -->
                        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">
                            <div class="flex items-center justify-between px-5 py-4 border-b border-slate-100">
                                <div class="flex items-center gap-2">
                                    <span class="material-symbols-outlined text-violet-500 text-lg">history</span>
                                    <h2 class="text-sm font-bold text-slate-800">최근 활동</h2>
                                </div>
                                <button class="text-xs text-primary font-medium hover:underline">전체 보기</button>
                            </div>
                            <div class="divide-y divide-slate-50 max-h-[280px] overflow-y-auto sidebar-scroll"
                                id="activityList">
                                <div class="flex flex-col items-center justify-center py-10 text-slate-300">
                                    <span class="material-symbols-outlined text-3xl mb-2">event_note</span>
                                    <p class="text-xs text-slate-400">최근 활동이 없습니다</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <!-- ===== PC Detail Modal ===== -->
    <div class="modal-overlay" id="pcModalOverlay">
        <div class="modal-panel max-w-lg">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                <h3 class="text-base font-bold text-slate-800" id="modalPcName">—</h3>
                <button id="modalClose" class="modal-close-btn"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6 space-y-5 max-h-[70vh] overflow-y-auto sidebar-scroll">
                <!-- System Info -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">시스템 정보</h4>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-slate-50 rounded-lg p-3">
                            <p class="text-[10px] text-slate-400">IP 주소</p>
                            <p class="text-sm font-semibold text-slate-700" id="modalIp">-</p>
                        </div>
                        <div class="bg-slate-50 rounded-lg p-3">
                            <p class="text-[10px] text-slate-400">상태</p>
                            <p class="text-sm font-semibold text-slate-700" id="modalStatus">-</p>
                        </div>
                        <div class="bg-slate-50 rounded-lg p-3">
                            <p class="text-[10px] text-slate-400">마지막 접속</p>
                            <p class="text-sm font-semibold text-slate-700" id="modalLastSeen">-</p>
                        </div>
                    </div>
                </div>
                <!-- Resource Usage -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">리소스 사용률</h4>
                    <div class="space-y-3">
                        <div class="flex items-center gap-3">
                            <span class="text-xs font-medium text-slate-500 w-12">CPU</span>
                            <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                <div class="h-full bg-primary rounded-full transition-all duration-500" id="modalCpu"
                                    style="width:0%"></div>
                            </div>
                            <span class="text-xs font-bold text-slate-600 w-10 text-right" id="modalCpuValue">0%</span>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="text-xs font-medium text-slate-500 w-12">메모리</span>
                            <div class="flex-1 h-2 bg-slate-100 rounded-full overflow-hidden">
                                <div class="h-full bg-violet-500 rounded-full transition-all duration-500"
                                    id="modalMemory" style="width:0%"></div>
                            </div>
                            <span class="text-xs font-bold text-slate-600 w-10 text-right"
                                id="modalMemoryValue">0%</span>
                        </div>
                    </div>
                </div>
                <!-- Remote Controls -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">원격 제어</h4>
                    <div class="grid grid-cols-3 gap-2">
                        <button data-command="lock" class="control-chip"><span
                                class="material-symbols-outlined text-base">lock</span>잠금</button>
                        <button data-command="restart" class="control-chip"><span
                                class="material-symbols-outlined text-base">restart_alt</span>재시작</button>
                        <button onclick="dashboard.requestScreenshot()" class="control-chip"><span
                                class="material-symbols-outlined text-base">screenshot_monitor</span>스크린샷</button>
                        <button onclick="dashboard.startLiveView()" class="control-chip"><span
                                class="material-symbols-outlined text-base">visibility</span>실시간</button>
                        <button data-command="shutdown" class="control-chip text-red-500"><span
                                class="material-symbols-outlined text-base">power_settings_new</span>종료</button>
                    </div>
                </div>
                <!-- Message -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">메시지 전송</h4>
                    <div class="flex gap-2">
                        <input id="modalMessageInput" type="text" placeholder="학생에게 전송할 메시지..."
                            class="flex-1 h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <button onclick="dashboard.sendMessageToPC()"
                            class="h-9 px-4 bg-primary text-white text-xs font-semibold rounded-lg hover:bg-primary-dark transition">
                            <span class="material-symbols-outlined text-base">send</span>
                        </button>
                    </div>
                </div>
                <!-- Process List -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider">실행 중인 프로세스</h4>
                        <button id="loadProcessesBtn" class="text-xs text-primary font-medium hover:underline">프로세스
                            조회</button>
                    </div>
                    <div id="processList" class="text-xs text-center text-slate-400 py-4">프로세스 조회 버튼을 클릭하세요</div>
                </div>
                <!-- Block Program -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">프로그램 잠금</h4>
                    <div class="flex gap-2 mb-2">
                        <input id="blockProgramInput" type="text" placeholder="예: discord.exe"
                            class="flex-1 h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <button id="blockProgramBtn"
                            class="h-9 px-4 bg-red-500 text-white text-xs font-semibold rounded-lg hover:bg-red-600 transition">잠금</button>
                    </div>
                    <div id="blockedList" class="text-xs text-center text-slate-400 py-2">차단된 프로그램이 없습니다</div>
                </div>
                <!-- Command History -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">명령 기록</h4>
                    <div id="modalCommandHistory" class="text-xs text-center text-slate-400 py-4">명령 기록이 없습니다</div>
                </div>
                <!-- File Transfer -->
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">파일/폴더 전송</h4>
                    <div class="space-y-2">
                        <input id="sendFilePath" type="text" placeholder="C:\파일경로\파일명.exe"
                            class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <input id="sendFileDestPath" type="text" placeholder="저장 경로 (학생 PC)"
                            class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <button id="sendFileBtn"
                            class="w-full h-9 bg-primary text-white text-xs font-semibold rounded-lg hover:bg-primary-dark transition">파일
                            전송</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Deploy Modal ===== -->
    <div class="modal-overlay" id="deployModalOverlay">
        <div class="modal-panel max-w-xl">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                <h3 class="text-base font-bold text-slate-800">🚀 원클릭 배포 시스템</h3>
                <button id="deployModalClose" class="modal-close-btn"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6 space-y-5 max-h-[70vh] overflow-y-auto sidebar-scroll">
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">네트워크 스캔</h4>
                    <div class="flex items-center gap-3 mb-3">
                        <button id="networkScanBtn"
                            class="inline-flex items-center gap-1.5 h-9 px-4 bg-primary text-white text-sm font-semibold rounded-lg hover:bg-primary-dark transition">
                            <span class="material-symbols-outlined text-base">radar</span>
                            네트워크 스캔 시작
                        </button>
                        <span id="scanStatus" class="text-xs text-slate-400"></span>
                    </div>
                    <div id="scanProgress" class="hidden mb-3">
                        <div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden">
                            <div id="scanProgressBar" class="h-full bg-primary rounded-full transition-all"
                                style="width:0%"></div>
                        </div>
                        <span id="scanPercent" class="text-xs text-slate-400 mt-1">0%</span>
                    </div>
                    <div id="scannedPcsList" class="hidden"></div>
                </div>
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">대상 PC 정보</h4>
                    <div class="space-y-3">
                        <div>
                            <label class="text-xs text-slate-500 mb-1 block">IP 주소</label>
                            <div class="flex gap-2">
                                <input id="deployTargetIP" type="text" placeholder="192.168.0.100"
                                    class="flex-1 h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                                <button id="checkConnectionBtn"
                                    class="h-9 px-3 text-xs border border-slate-200 rounded-lg hover:bg-slate-50 transition">✓
                                    테스트</button>
                            </div>
                            <span id="connectionStatus" class="text-xs text-slate-400 mt-1"></span>
                        </div>
                        <div>
                            <label class="text-xs text-slate-500 mb-1 block">관리자 계정</label>
                            <input id="deployUsername" type="text" placeholder="Administrator"
                                class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        </div>
                        <div>
                            <label class="text-xs text-slate-500 mb-1 block">비밀번호</label>
                            <input id="deployPassword" type="password" placeholder="••••••••"
                                class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        </div>
                    </div>
                </div>
                <div id="deploySteps" class="hidden">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">배포 진행 상태</h4>
                    <div id="stepsList"></div>
                </div>
                <div class="flex gap-3 pt-2" id="deployActions">
                    <button id="deployCancelBtn"
                        class="flex-1 h-10 border border-slate-200 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 transition">취소</button>
                    <button id="deployAutoBtn"
                        class="flex-1 h-10 bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-sm font-bold rounded-lg hover:brightness-110 transition">🚀
                        원클릭 자동 배포</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Block Management Modal ===== -->
    <div class="modal-overlay" id="blockModalOverlay">
        <div class="modal-panel max-w-xl">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                <h3 class="text-base font-bold text-slate-800">🚫 차단 관리</h3>
                <button id="blockModalClose" class="modal-close-btn"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6 space-y-5 max-h-[70vh] overflow-y-auto sidebar-scroll">
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">웹사이트 차단</h4>
                    <div class="flex gap-2 mb-3">
                        <input id="newBlockedSite" type="text" placeholder="youtube.com"
                            class="flex-1 h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <button id="addBlockedSiteBtn"
                            class="h-9 px-4 bg-primary text-white text-xs font-semibold rounded-lg hover:bg-primary-dark transition">+
                            추가</button>
                    </div>
                    <div id="blockedSitesList"></div>
                </div>
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">프로그램 차단</h4>
                    <div class="flex gap-2 mb-3">
                        <input id="newBlockedProgram" type="text" placeholder="chrome"
                            class="flex-1 h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        <button id="addBlockedProgramBtn"
                            class="h-9 px-4 bg-primary text-white text-xs font-semibold rounded-lg hover:bg-primary-dark transition">+
                            추가</button>
                    </div>
                    <div id="blockedProgramsList"></div>
                </div>
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">적용 대상</h4>
                    <div class="flex gap-4">
                        <label class="flex items-center gap-2 text-sm text-slate-600 cursor-pointer">
                            <input type="radio" name="applyTarget" value="all" checked
                                class="text-primary focus:ring-primary">
                            모든 PC
                        </label>
                        <label class="flex items-center gap-2 text-sm text-slate-600 cursor-pointer">
                            <input type="radio" name="applyTarget" value="selected"
                                class="text-primary focus:ring-primary">
                            선택된 PC만
                        </label>
                    </div>
                </div>
                <div class="flex gap-3 pt-2">
                    <button id="blockModalCancelBtn"
                        class="flex-1 h-10 border border-slate-200 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 transition">닫기</button>
                    <button id="applyBlockingBtn"
                        class="flex-1 h-10 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-dark transition">🚀
                        모든 PC에 적용</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== One-Click Setup Modal ===== -->
    <div class="modal-overlay" id="oneClickModalOverlay">
        <div class="modal-panel max-w-xl">
            <div
                class="flex items-center justify-between px-6 py-4 border-b border-slate-100 bg-gradient-to-r from-cyan-500 to-blue-500">
                <h3 class="text-base font-bold text-white">⚡ 원클릭 전체 설정</h3>
                <button id="oneClickModalClose" class="modal-close-btn !text-white !border-white/30"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6 space-y-5 max-h-[70vh] overflow-y-auto sidebar-scroll">
                <div>
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">관리자 자격 증명</h4>
                    <p class="text-xs text-slate-400 mb-3">학생 PC 공통 관리자 계정을 입력하세요.</p>
                    <div class="space-y-3">
                        <div>
                            <label class="text-xs text-slate-500 mb-1 block">사용자명</label>
                            <input id="oneClickUsername" type="text" placeholder="Administrator"
                                class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        </div>
                        <div>
                            <label class="text-xs text-slate-500 mb-1 block">비밀번호</label>
                            <input id="oneClickPassword" type="password" placeholder="••••••••"
                                class="w-full h-9 px-3 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/30">
                        </div>
                    </div>
                </div>
                <div id="oneClickProgressSection" class="hidden">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">진행 상태</h4>
                    <div class="w-full h-2 bg-slate-100 rounded-full overflow-hidden mb-2">
                        <div id="oneClickProgressBar"
                            class="h-full bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full transition-all"
                            style="width:0%"></div>
                    </div>
                    <p id="oneClickStatus" class="text-xs text-slate-500">준비 중...</p>
                    <div id="oneClickLog"
                        class="mt-3 max-h-[150px] overflow-y-auto bg-slate-50 rounded-lg p-3 text-xs text-slate-500 sidebar-scroll">
                    </div>
                </div>
                <div id="oneClickResultSection" class="hidden">
                    <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3">결과 요약</h4>
                    <div id="oneClickResultSummary"></div>
                </div>
                <div class="flex gap-3 pt-2">
                    <button id="oneClickCancelBtn"
                        class="flex-1 h-10 border border-slate-200 text-sm font-medium text-slate-600 rounded-lg hover:bg-slate-50 transition">닫기</button>
                    <button id="oneClickStartBtn"
                        class="flex-1 h-10 bg-gradient-to-r from-cyan-500 to-blue-500 text-white text-sm font-bold rounded-lg hover:brightness-110 transition">⚡
                        원클릭 설정 시작</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Screenshot Viewer Modal ===== -->
    <div class="modal-overlay" id="screenshotModalOverlay">
        <div class="modal-panel max-w-3xl">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                <h3 class="text-base font-bold text-slate-800">📸 스크린샷 뷰어</h3>
                <button onclick="dashboard.closeScreenshotModal()" class="modal-close-btn"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6">
                <div id="screenshotGrid" class="grid grid-cols-2 gap-3">
                    <div class="flex flex-col items-center justify-center py-10 text-slate-300 col-span-2">
                        <span class="material-symbols-outlined text-3xl mb-2">image</span>
                        <p class="text-xs text-slate-400">스크린샷이 없습니다</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Bulk Message Modal ===== -->
    <div class="modal-overlay" id="bulkMessageModalOverlay">
        <div class="modal-panel max-w-md">
            <div class="flex items-center justify-between px-6 py-4 border-b border-slate-100">
                <h3 class="text-base font-bold text-slate-800">💬 전체 메시지 전송</h3>
                <button onclick="dashboard.closeBulkMessageModal()" class="modal-close-btn"><span
                        class="material-symbols-outlined">close</span></button>
            </div>
            <div class="p-6 space-y-4">
                <label class="text-xs text-slate-400 block">모든 온라인 PC에 메시지를 전송합니다</label>
                <textarea id="bulkMessageInput" rows="3" placeholder="전체 학생에게 전달할 메시지..."
                    class="w-full px-3 py-2 text-sm border border-slate-200 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary/30"></textarea>
                <button onclick="dashboard.sendBulkMessage()"
                    class="w-full h-10 bg-primary text-white text-sm font-bold rounded-lg hover:bg-primary-dark transition">📨
                    전체 전송</button>
            </div>
        </div>
    </div>

    <!-- ===== Live View Overlay ===== -->
    <div class="fixed inset-0 bg-black/95 z-[200] hidden flex-col" id="liveViewOverlay">
        <div class="flex items-center justify-between px-6 py-3 bg-black/50 backdrop-blur">
            <div class="flex items-center gap-3">
                <span class="w-2 h-2 rounded-full bg-red-500 animate-pulse"></span>
                <span class="text-white font-bold text-sm" id="liveViewPcName">—</span>
                <span class="text-[10px] font-bold px-2 py-0.5 bg-red-500/20 text-red-400 rounded-full">LIVE</span>
            </div>
            <div class="flex items-center gap-4 text-xs text-slate-400">
                <span id="liveViewFps">0 FPS</span>
                <span id="liveViewQuality">Q: 0%</span>
                <span id="liveViewBandwidth">0 KB/s</span>
            </div>
            <div class="flex items-center gap-3">
                <label class="flex items-center gap-2 text-xs text-slate-400">
                    FPS
                    <input type="range" id="liveViewFpsSlider" min="2" max="10" value="5" class="w-16"
                        oninput="dashboard.updateStreamSettings()">
                    <span id="liveViewFpsValue">5</span>
                </label>
                <label class="flex items-center gap-2 text-xs text-slate-400">
                    품질
                    <input type="range" id="liveViewQualitySlider" min="10" max="80" value="40" class="w-16"
                        oninput="dashboard.updateStreamSettings()">
                    <span id="liveViewQualityValue">40</span>
                </label>
                <button onclick="dashboard.stopLiveView()"
                    class="w-8 h-8 flex items-center justify-center text-white hover:text-red-400 transition">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
        </div>
        <div class="flex-1 flex items-center justify-center relative">
            <canvas id="liveViewCanvas"></canvas>
            <div id="liveViewPlaceholder"
                class="absolute inset-0 flex flex-col items-center justify-center text-white/50">
                <div class="w-8 h-8 border-2 border-white/30 border-t-white/80 rounded-full animate-spin mb-3"></div>
                <p class="text-sm">화면 스트림 연결 중...</p>
            </div>
        </div>
    </div>

    <!-- ===== Command Palette ===== -->
    <div class="modal-overlay" id="commandPaletteOverlay">
        <div class="w-full max-w-lg bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden mt-[15vh]"
            style="margin-left:auto;margin-right:auto;">
            <input type="text" id="commandPaletteInput" placeholder="명령어 검색... (PC 이름, 명령, 기능)" autocomplete="off"
                class="w-full h-12 px-5 text-sm border-b border-slate-100 focus:outline-none placeholder:text-slate-300">
            <div id="commandPaletteResults" class="max-h-[300px] overflow-y-auto"></div>
        </div>
    </div>

    <!-- ===== Thumbnail Grid Overlay ===== -->
    <div class="fixed inset-0 bg-black/90 z-[200] hidden flex-col" id="thumbnailGridOverlay">
        <div class="flex items-center justify-between px-6 py-4">
            <h3 class="text-white font-bold">📺 전체 PC 화면 모니터링</h3>
            <button onclick="dashboard.closeThumbnailGrid()" class="text-white hover:text-red-400 transition">
                <span class="material-symbols-outlined text-2xl">close</span>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto p-6" id="thumbnailGrid"></div>
    </div>

    <!-- ===== Toast Container ===== -->
    <div class="fixed bottom-6 right-6 z-[300] space-y-2" id="toastContainer"></div>

    <script src="app.js"></script>
</body>

</html>